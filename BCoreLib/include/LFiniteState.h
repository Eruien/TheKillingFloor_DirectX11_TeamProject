#pragma once
#include <map>
#include <memory>

enum class State
{
	NONE,
	// Character
	CHARACTERIDLE,
	CHARACTERWALK,
	CHARACTERRUN,
	CHARACTERATTACK,
	CHARACTERSHOOT,
	CHARACTERONEHANDSLASH,
	CHARACTERTWOHANDSLASH,
	CHARACTERRUSH,
	CHARACTERRELOAD,
	CHARACTERTAKEDAMAGE,
	CHARACTERDEATH,

	//Scene
	MAINSCENE,
	INGAMESCENE,
	ENDSCENE,
	SHOPSCENE,
	SELECTSCENE,
	SWORDSHOPSCENE,
	LOADSCENE,

	//Enemy
	ENEMYPATROL,
	ENEMYTRACE,
	ENEMYDEATH,
	ENEMYTAKEDAMAGE,
	ENEMYATTACK,

	//Tank
	TANKTRACE,
	TANKDEATH,
	TANKTAKEDAMAGE,
	TANKRUSH,
	TANKCOMBO,

	//Boss
	BOSSTRACE,
	BOSSSWIPING,
	BOSSJUMPATTACK,
	BOSSTAKEDAMAGE,
	BOSSDEATH,
};

enum class Event
{
	//Character
	IDLESPEED,
	WALKSPEED,
	RUNSPEED,
	CLICKATTACKBUTTON,
	GUNSHOOT,
	BLADEONESLASH,
	BLADETWOSLASH,
	ENDATTACK,
	USERUSH,
	ENDRUSH,

	//Scene
	GOMAINSCENE,
	GOINGAMESCENE,
	GOENDSCENE,
	GOSHOPSCENE,
	GOSELECTSCENE,
	GOSWORDSHOPSCENE,
	GOLOADSCENE,

	//Enemy
	FINDPLAYER,
	FATALDAMAGE,
	TAKEDAMAGE,
	RECOVERYDAMAGE,
	PLAYERINATTACKRANGE,
	PLAYEROUTATTACKRANGE,

	STARTRELOAD,
	ENDRELOAD,
	CHARACTERREVIVE,

	//Tank
	TANKCOMBOATTACK,
	TANKRUSHATTACK,

	//Boss
	BOSSJUMPATTACK,
	BOSSSWIPING,
};

class LFiniteState
{
private:
	State m_State;
public:
	std::map<Event, State> m_StateMap;
public:
	State GetState() { return m_State; }
public:
	void AddTransition(Event inputEvent, State outputState);
	State Output(Event inputEvent);
public:
	LFiniteState(State state);
};

